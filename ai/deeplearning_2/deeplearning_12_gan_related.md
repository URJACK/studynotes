# InfoGAN

## 实现过程

在我们使用infoGAN完成了训练之后

![image-20200728190515652](.\imgs_12\image-20200728190515652.png)

我们的Generator可以正确生成假图片，并且Discriminator也可以从假图片中直接获取到相关的隐藏信息。

但实际上，这个生成图片的效果存在相当量上的偏差，并不理想。

我预测的可能性是：

1. 判别网络D与提取网络Q 共享了权重值，这使得双方互相的影响较为严重。
2. 隐藏码c2、c3是否应该onehot 处理？（但这样c2与c3就变成了离散量）
3. 初始取值范围是否选取有问题？

包括后面的O-GAN，我将去阅读一些相关文献来检验自己的预测。

## 文献阅读和摘录

### sujianlin

https://arxiv.org/pdf/1903.01931.pdf

#### 1·Introduction

##### 1`关于我们是否应该共享权重

A natural question is can we **share weights** between discriminator and encoder? Few of researches implement it successfully. As far as we know, **the only one successfully** done it is **Introspective Variational Autoencoders** (**IntroVAEs**, Huang et al. (2018)). But IntroVAEs are such complex that we are hard to reproduce their results.

---

所以我认为，我们的判别网络和提取网络应当分开使用权重。

#### 2·Basic Analysis

##### 1`GAN的共性

![image-20200803101307910](.\imgs_12\image-20200803101307910.png)

---

为如何使用这个Discriminator做铺垫

#### 3·Our Models

##### 1`相关函数定义

![image-20200803102204199](.\imgs_12\image-20200803102204199.png)![image-20200803132958308](.\imgs_12\image-20200803132958308.png)

---

avg是**平均值**，std是**标准差**（方差开根号）

p是**皮尔森相关系数**：协方差与标准差的商，绝对值在0~1之间。p越大，说明两个事物之间的相关性越强。所以我们需要最大化（这也是为什么后面公式中，p会带有负号的原因）该系数。

##### 2`判别器及其相关损失函数

![image-20200803102244949](.\imgs_12\image-20200803102244949.png)

---

这里要注意的是，E(x)是将输入的图片转为近似于噪声的信号。

T(x)才是对噪声进行判定。

显然，在实现上，T这个网络的输入是E这个网络的输出。既可以看成整体上的一个网络，也可以看成是两个独立网络的级联。

##### 3`网络的简化

![image-20200803114823438](.\imgs_12\image-20200803114823438.png)

---

省去判别网络T的原因：

1. 反正最后判别网络用不上
2. 仅用Encoder（网络E）也可以实现图片的强化训练

#### 4·Arguments

##### 1`为什么不选择方差作为损失函数的定义

这里用到了自由度的概念，我截取了部分百度百科上关于**自由度**的例子：

```
1.若存在两个变量a 、b ，而a + b = 6那么他的自由度为1。因为其实只有a才能真正的自由变化，b会被a选值的不同所限制。
2.估计总体的平均数（u）时，由于样本中的n个数都是相互独立的，任一个尚未抽出的数都不受已抽出任何数值的影响，所以自由度为n。
3.估计总体的方差（o）时所使用的统计量是样本的标准差s，而s必须用到样本平均数x来计算。在抽样完成后已确定，所以大小为n的样本中只要 n - 1个数确定了，第n个数就只有一个能使样本符合x的数值。也就是说，样本中只有n - 1个数可以自由变化，只要确定了这n - 1个数，方差也就确定了。这里，平均数x就相当于一个限制条件，由于加了这个限制条件，样本方差s的自由度为n - 1。
4.统计模型的自由度等于可自由取值的自变量的个数。如在回归方程中，如果共有p个参数需要估计，则其中包括了p - 1个自变量（与截距对应的自变量是常量）。因此该回归方程的自由度为p - 1。
```

![image-20200803130621182](.\imgs_12\image-20200803130621182.png)

---

这段关于占用自由度的推导不是很明白，大致意思是采用方差的话，会导致自由度被侵占过多，导致判别器缺少自由度。但使用p(z,z')的话，它与均值和方差都不相关，这也是为什么在判别器中，可以使用均值的原因。

### BringingaGANtoaknifefight

#### 1·